# [ms_auth] - Micro Servi√ßo de Aut√™ntica√ß√£o

### Descri√ß√£o
Este servi√ßo √© respons√°vel por gerenciar a autentica√ß√£o do usu√°rio, incluindo opera√ß√µes como registro, login, confirma√ß√£o de e-mail, recupera√ß√£o de senha e atualiza√ß√£o de tokens de aut√™ntica√ß√£o.

### üõ† Tecnologias
As seguintes ferramentas foram usadas na constru√ß√£o do projeto:
- Golang
- GO-Chi
- SQLC
- Golang-migrate
- Google Wire
- Postgres
- RabbitMQ
- K8S (Apenas criei os arquivos de configura√ß√£o para simular um poss√≠vel deploy. O micro servi√ßo foi testado localmente usando o Minikube. Isso assegurou que todas as configura√ß√µes estivessem corretas e que a aplica√ß√£o estivesse pronta para ser implantada em um ambiente de produ√ß√£o, embora as configura√ß√µes de secret que s√£o informa√ß√µes sens√≠veis teriam que ser criadas no momento de cria√ß√£o do cluster, pois para essas informa√ß√µes n√£o s√£o feito commits)

### Endpoints
#### Cadastrar Usu√°rio:

    M√©todo: POST
    URL: /auth/signup
    Headers:
        Content-Type: application/json
    
Exemplo de corpo da requisi√ß√£o:
```json
{
  "name": "LOREM IPSUM",
  "email": "lorem@ipsum.com",
  "password": "P@ssw0rd"
}
```

#### Autenticar Usu√°rio:

    M√©todo: POST
    URL: /auth/signin
    Headers:
        Content-Type: application/json

#### Exemplo de corpo da requisi√ß√£o:

```json
{
  "email": "lorem@ipsum.com",
  "password": "P@ssw0rd"
}
```

#### Solicita√ß√£o de Confirma√ß√£o de E-mail:

    M√©todo: POST
    URL: /auth/email-confirmation-request
    Headers:
        Content-Type: application/json
        email: lorem@ipsum.com

#### Confirma√ß√£o de E-mail:

    M√©todo: POST
    URL: /auth/confirm-email
    Headers:
        Content-Type: application/json
        x_access_token: {{Bearer Token}}
        
#### Recupera√ß√£o de Senha:

    M√©todo: POST
    URL: /auth/forgot-password
    Headers:
        Content-Type: application/json

#### Exemplo de corpo da requisi√ß√£o:
```json
{
  "email": "lorem@ipsum.com"
}
```

#### Atualiza√ß√£o de Senha:

    M√©todo: POST
    URL: /auth/update-password
    Headers:
        Content-Type: application/json
        x_access_token: {{Bearer Token}}

#### Exemplo de corpo da requisi√ß√£o:
```json
{
   "password": "P@ssw0rd"
}
```

#### Atualiza√ß√£o de Token com Refresh Token:

    M√©todo: POST
    URL: /auth/refresh-token
    Headers:
        Content-Type: application/json
        x_access_token: {{Bearer Token}}


### Configura√ß√£o e Uso
##### [PRECISA DO DOCKER INSTALADO]

- Clone o reposit√≥rio
- Criar o arquivo .env e configurar as vari√°veis de ambientes que est√£o no arquivo .env.example
- Execute o script start_dev.sh para iniciar a aplica√ß√£o em modo desenvolvimento
- Execute o servi√ßo usando go run cmd/http/main.go
- Se deseja apenas executar sem realizar altera√ß√µes, utilize o Dockerfile.prd para gerar a imagem com o executavel da aplica√ß√£o, voc√™ vai precisar dos containers do Postgres e do RabbitMQ, pode utilizar o docker-compose.dev.yaml e apenas alterar a imagem do APP para a imagem gerada
